{% extends "layouts/base.html" %}
{% block title %}Account{% endblock %} 
{% block tags %}
{% endblock %}
{% block content %}
<div class="w-full flex flex-col">
    <div class="flex flex-row flex-wrap">
        <div class="min-w-[300px] shadow-sm border-2 p-10 max-lg:flex-1">
            <h4 class="text-lg font-semibold text-center">Account</h4>
            <div class="border-2 rounded-md"></div>
            <div class="flex flex-col ">
                <a href="" class="p-2 ">Il tuo profilo</a>
                <a href="" class="p-2 ">I tuoi soggiorni</a>
                <a href="" class="p-2 ">Cambia password</a>
                <a href="/logout" class="p-2 text-red-400">Esci</a>
            </div>
        </div>
        <div class="p-8 flex-grow">
            {% block content1 %}
            {% endblock %}
        </div>
    </div>
</div>
{% endblock %}
{% block scripts %}
<script type="text/javascript">
    const profilePic = document.querySelector('#open_pic_modal');
    const picModal = document.querySelector('.pic__modal');
    const modalClose = document.querySelector('.modal__close');

    profilePic.addEventListener('click', () => {
        picModal.classList.remove('hidden');
    });

    modalClose.addEventListener('click', () => {
        picModal.classList.add('hidden');
    });

    $('#change_pic_form').submit(function(e) {
        e.preventDefault();
        const formData = new FormData(this);
        $.ajax({
            type: 'POST',
            url: '/api/account/picture/',
            data: formData,
            processData: false,
            contentType: false,
            success: function(response) {
                location.reload();
            },
            error: function(error) {
                $('#error_modal_message').text(error.responseJSON.error);
            }
        });
    });

</script>
{% endblock %}